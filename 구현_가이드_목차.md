# Daham VOC 구현 가이드 - 전체 목차

## 📚 문서 구조

### 필수 선행 문서
1. **개발_가이드.md** - 기술 스택, DB 설계, API 명세
2. **운영_가이드.md** - 사용자 가이드, 화면 설계

### 구현 가이드 (Phase별 분리)

---

## 📖 구현_가이드_Phase1.md (기본 인프라 - 2주)
**파일 크기**: ~2,000라인
**상태**: ✅ 완료

### Week 1: 프로젝트 초기 설정
- [x] 프로젝트 구조 정의
- [x] 파일 맵 (File Map) 작성
- [x] PostgreSQL + Prisma 설정
- [x] MongoDB 연결 설정
- [x] Redis 연결 설정
- [x] 환경 변수 설정
- [x] JWT 인증 시스템
- [x] 회원가입/로그인 API

### Week 2: 사업장 관리
- [x] 사업장 CRUD API
- [x] 사업장 그룹 CRUD API
- [x] 부문별 필터링
- [x] 권한 기반 데이터 접근
- [x] 페이지네이션
- [x] 검색 기능
- [x] 엑셀 일괄 등록 (Kakao Maps 연동)

**생성 파일 수**: ~30개
**총 예상 라인**: ~4,000라인

---

## 📖 구현_가이드_Phase2.md (식단 및 사진 관리 - 2주)
**파일 크기**: ~2,000라인
**상태**: ✅ 완료

### Week 3: 식단 관리
- [x] Menu 모델 확장 (날짜 범위 기반)
- [x] GCP Storage 연동 (Mock 포함)
- [x] 이미지 업로드 API
- [x] 이미지 압축/썸네일 생성
- [x] 그룹 기반 일괄 업로드
- [x] 식단 조회 API (사업장별, 날짜별)
- [x] 식단 수정/삭제 API
- [x] 주간 식단표 템플릿 관리

### Week 4: 배식 사진 관리
- [x] MealPhoto CRUD API
- [x] 이미지 업로드 (GCP Storage)
- [x] GPS 좌표 저장 및 검증
- [x] Geofencing (사업장 반경 체크)
- [x] 사진 타입 구분 (배식/잔반/시설)
- [x] 사진 수정/삭제 (본인만)
- [x] 관리자 피드백 기능
- [x] 사진 갤러리 조회
- [x] 일괄 삭제 기능

**생성 파일 수**: ~20개
**총 실제 라인**: ~3,000라인

---

## 📖 구현_가이드_Phase3.md (VOC 및 근태 - 2-3주)
**파일 크기**: ~2,700라인
**상태**: ✅ 핵심 완료 (실제 구현 기준 업데이트 완료)

### Week 5: VOC 시스템
- [x] CustomerFeedback CRUD API
- [x] **이미지 첨부 기능** (최대 6개, FeedbackImage)
- [x] 별점 평가 시스템 (1-5점)
- [x] VOC 상태 관리 (미처리/처리중/완료/종료)
- [x] 관리자 답변 기능
- [ ] ~~VOC 알림 로직~~ (미구현)
- [ ] ~~담당자 평균 별점 자동 계산~~ (미구현)
- [x] VOC 통계 API

### Week 6: 근태 관리
- [x] Attendance 체크인/체크아웃 API
- [x] GPS 좌표 기록 및 검증
- [x] Geofencing (사업장 반경 검증)
- [x] **Status Enum 기반 상태 관리**
- [x] **AttendanceSetting 관리** (별도 모델)
- [x] 근태 통계 API
- [ ] ~~비정상 출근 알림~~ (미구현)

### Week 7: 통계 및 대시보드 API
- [x] 대시보드 기본 요약 통계
- [x] VOC 통계 (상태별, 기간별)
- [ ] ~~평점 통계 (담당자별, 사업장별)~~ (미구현)
- [x] 근태 통계 (출근율, 지각률)
- [x] Redis 캐싱 적용
- [ ] ~~상세 통계 (사업장별, 담당자별, 부문별, 트렌드)~~ (미구현)

**생성 파일 수**: ~11개 (가이드 예상 25개 중)
**총 실제 라인**: ~2,700라인 (가이드 예상 4,500라인 중)

---

## 📖 구현_가이드_Phase4.md (웹 프론트엔드 - 2주)
**파일 크기**: ~1,850라인
**상태**: ✅ 완료 (실제 구현 기준 업데이트 완료)

### Week 8: 관리자 웹 기본 구조
- [x] React + Vite 프로젝트 생성
- [x] Ant Design 설치 및 테마 설정
- [x] 라우팅 구조 (React Router)
- [x] Zustand 스토어 설정
- [x] React Query 설정
- [x] Axios 인터셉터 (JWT)
- [x] 로그인/로그아웃 페이지
- [x] MainLayout 컴포넌트

### Week 9: 관리자 웹 핵심 기능
- [x] 대시보드 페이지
- [x] 사업장 관리 페이지 (목록, 등록, 수정)
- [x] 사업장 그룹 관리 페이지
- [x] 사업장 지도 뷰 (여러 사업장 동시 표시)
- [x] 식단 관리 페이지 (이미지 업로드)
- [x] **주간 식단표 페이지** (추가 구현)
- [x] **메뉴 타입 관리 페이지** (추가 구현)
- [x] 배식 사진 관리 페이지 (MealPhotoManagementPage)
- [x] VOC 관리 페이지
- [x] 담당자 관리 페이지 (목록 + 등록/수정)
- [x] 근태 관리 페이지
- [x] 통계 조회 페이지
- [x] 카카오맵 컴포넌트
- [x] **주소 검색 컴포넌트** (추가 구현)
- [x] **비밀번호 변경 페이지** (추가 구현)

**생성 파일 수**: ~41개 (페이지 18 + API 10 + 기타)
**총 실제 라인**: ~1,850라인 (가이드 예상 8,000라인 중)

---

## 📖 구현_가이드_Phase5.md (모바일 앱 - 3주)
**파일 크기**: ~1,400라인
**상태**: ✅ 핵심 완료 (Expo 기반 간소화 버전)

### Week 10: 모바일 기본 구조 (Expo 기반)
- [x] ~~React Native CLI~~ → **Expo 프로젝트 생성**
- [x] ~~React Native Paper~~ → **Native Components 사용**
- [x] React Navigation 설정 (Bottom Tabs + Stack)
- [x] ~~Context API~~ → **Zustand 스토어**
- [x] Axios 인터셉터 (JWT)
- [x] AsyncStorage 설정
- [x] 로그인 화면
- [x] 홈 화면 (사용자 정보)

### Week 11: 모바일 핵심 기능
- [x] 출퇴근 체크인 화면 (**expo-location**)
- [ ] ~~카메라 화면~~ (미구현)
- [ ] ~~사진 업로드~~ (미구현)
- [ ] ~~사진 수정/삭제 화면~~ (미구현)
- [ ] ~~식단 조회 화면~~ (미구현)
- [x] VOC 작성 화면
- [ ] ~~VOC 목록 화면~~ (미구현)
- [x] **react-native-maps** (카카오맵 대신)

### Week 12: 오프라인 & 최적화
- [x] ~~WatermelonDB~~ → **React Query + AsyncStorage**
- [x] 오프라인 액션 저장 (`offlineStorage.ts`)
- [x] **React Query 영속화** (추가 구현)
- [ ] ~~FCM 푸시 알림~~ (미구현)
- [x] **네트워크 상태 감지** (추가 구현)
- [ ] ~~Android/iOS 빌드 설정~~ (미구현)

**생성 파일 수**: ~15개 (가이드 예상 60개 중)
**총 실제 라인**: ~1,500라인 (가이드 예상 10,000라인 중)

---

## 📖 구현_가이드_Phase6.md (배포 및 테스트 - 1주)
**파일 크기**: ~1,050라인
**상태**: ❌ 미구현

### Week 13: 통합 테스트 & 배포
- [ ] Docker 이미지 빌드 (미구현)
- [ ] docker-compose.yml 작성 (미구현)
- [ ] GitHub Actions CI/CD 설정 (미구현)
- [ ] GCP Cloud Run 배포 (미구현)
- [ ] 환경 변수 설정 (미구현)
- [ ] 도메인 연결 및 SSL (미구현)
- [ ] 성능 모니터링 Sentry (미구현)
- [ ] 로그 수집 GCP Logging (미구현)
- [ ] 통합 테스트 실행 (미구현)
- [ ] 사용자 테스트 및 피드백 (미구현)

**생성 파일 수**: 0개 (가이드 예상 10개)
**총 실제 라인**: 0라인 (가이드 예상 1,500라인)

---

## 📊 전체 통계

| Phase | 기간 | 파일 수 (예상/실제) | 라인 수 (예상/실제) | 상태 |
|-------|------|---------------------|---------------------|------|
| Phase 1 | 2주 | ~30개 | ~4,000 | ✅ 완료 |
| Phase 2 | 2주 | ~20개 | ~3,000 | ✅ 완료 |
| Phase 3 | 2-3주 | ~25개 / **11개** | ~4,500 / **2,700** | ✅ 핵심 완료 |
| Phase 4 | 2주 | ~50개 / **41개** | ~8,000 / **1,850** | ✅ 완료 |
| Phase 5 | 3주 | ~60개 / **15개** | ~10,000 / **1,500** | ✅ 핵심 완료 |
| Phase 6 | 1주 | ~10개 / **0개** | ~1,500 / **0** | ❌ 미구현 |
| **합계** | **12-13주** | **~195개 / ~97개** | **~31,000 / ~11,050** | **50% 달성** |

---

## 🎯 사용 방법

### 1. 순서대로 읽기
각 Phase를 순서대로 진행하세요.

### 2. Agent 작업 시
- 해당 Phase 가이드 전체 읽기
- 파일 맵 (Phase1) 필독
- 중복 방지 체크리스트 확인
- 작업 완료 후 인계 템플릿 작성

### 3. 파일당 2000라인 제한
- 각 Phase 가이드 문서 자체는 2000라인 제한
- 실제 생성될 코드는 제한 없음 (단, 각 코드 파일은 제한 있음)

---

## 📌 구현 현황 요약 (2025-01-13 기준)

1. ✅ **Phase 1** - 완료 (프로젝트 초기 설정, 사업장 관리)
2. ✅ **Phase 2** - 완료 (식단 및 사진 관리)
3. ✅ **Phase 3** - 핵심 완료 (VOC 및 근태, 일부 기능 미구현)
4. ✅ **Phase 4** - 완료 (웹 프론트엔드, 추가 페이지 포함)
5. ✅ **Phase 5** - 핵심 완료 (모바일 앱, Expo 간소화 버전)
6. ❌ **Phase 6** - 미구현 (배포 및 테스트)
7. ✅ **추가 기능 (2025-01-13)** - 완료 (식수 관리 강화, 근태 휴게시간, 엑셀 다운로드)

### 전체 달성률
- **파일 수**: 109개 / 195개 예상 (**55.9%**)
- **라인 수**: ~12,550 / ~31,000 예상 (**40.5%**)
- **핵심 기능**: 개발 환경에서 동작 가능, 배포 인프라 미구현

**현재 상태**: 개발 환경 완료, 프로덕션 배포 준비 필요

---

## 📝 참고 문서

- **Phase2_실제구현_vs_가이드_차이점.md** - Phase 2 구현 vs 가이드 상세 비교 분석
- **구현_가이드_추가_기능_2025-01-13.md** - 2025-01-13 추가 구현 기능 상세 가이드
