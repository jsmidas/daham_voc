# ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

> ì§‘ê³¼ ì‚¬ë¬´ì‹¤ì—ì„œ ë™ì¼í•œ ë°ì´í„°ë¡œ ê°œë°œí•˜ê¸° ìœ„í•œ Supabase ì„¤ì • ê°€ì´ë“œ

## ëª©ì°¨
- [ê°œìš”](#ê°œìš”)
- [Supabase í”„ë¡œì íŠ¸ ìƒì„±](#supabase-í”„ë¡œì íŠ¸-ìƒì„±)
- [ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •](#ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°-ì„¤ì •)
- [Prisma ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰](#prisma-ë§ˆì´ê·¸ë ˆì´ì…˜-ì‹¤í–‰)
- [ê°œë°œ ì„œë²„ ì‹¤í–‰](#ê°œë°œ-ì„œë²„-ì‹¤í–‰)
- [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ê°œìš”

### ì™œ Supabaseë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?

- **ì§‘/ì‚¬ë¬´ì‹¤ ë°ì´í„° ë™ê¸°í™”**: ì–´ë””ì„œë“  ë™ì¼í•œ ê°œë°œìš© ë°ì´í„°ë¡œ ì‘ì—…
- **ë¬´ë£Œ ì œê³µ**: ê°œë°œ í™˜ê²½ìœ¼ë¡œ ì¶©ë¶„í•œ ìš©ëŸ‰ ì œê³µ
- **PostgreSQL ì™„ì „ í˜¸í™˜**: ë°°í¬ í™˜ê²½ê³¼ ë™ì¼í•œ DB ì—”ì§„ ì‚¬ìš©
- **ìë™ ë°±ì—…**: í´ë¼ìš°ë“œì—ì„œ ìë™ ê´€ë¦¬

### í™˜ê²½ êµ¬ë¶„

| í™˜ê²½ | ë°ì´í„°ë² ì´ìŠ¤ | ìš©ë„ |
|------|------------|------|
| **ê°œë°œ** | Supabase PostgreSQL | ë¡œì»¬ ê°œë°œ, í…ŒìŠ¤íŠ¸ (ì§‘/ì‚¬ë¬´ì‹¤ ê³µìœ ) |
| **ë°°í¬** | GCP Cloud SQL | ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ |

---

## Supabase í”„ë¡œì íŠ¸ ìƒì„±

### 1. Supabase ê³„ì • ìƒì„±

1. [https://supabase.com](https://supabase.com) ì ‘ì†
2. "Start your project" í´ë¦­
3. GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ (ê¶Œì¥)

### 2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

1. Dashboardì—ì„œ "New Project" í´ë¦­
2. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - **Name**: `daham-voc-dev` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
   - **Database Password**: ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (âš ï¸ ê¼­ ì €ì¥!)
   - **Region**: `Northeast Asia (Seoul)` ì„ íƒ
   - **Pricing Plan**: Free ì„ íƒ

3. "Create new project" í´ë¦­ (ìƒì„±ê¹Œì§€ 2-3ë¶„ ì†Œìš”)

### 3. ì—°ê²° ì •ë³´ í™•ì¸

í”„ë¡œì íŠ¸ ìƒì„± í›„:

1. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ **Settings** (âš™ï¸) í´ë¦­
2. **Database** í´ë¦­
3. **Connection string** ì„¹ì…˜ì—ì„œ **URI** ë³µì‚¬

ì—°ê²° ë¬¸ìì—´ í˜•ì‹:
```
postgresql://postgres.[í”„ë¡œì íŠ¸ID]:[ë¹„ë°€ë²ˆí˜¸]@aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres
```

**ì˜ˆì‹œ:**
```
postgresql://postgres.abcdefghijk:MySecretPassword123@aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •

### 1. `.env` íŒŒì¼ ìˆ˜ì •

`backend/.env` íŒŒì¼ì„ ì—´ê³  `DATABASE_URL`ì„ Supabase ì—°ê²° ë¬¸ìì—´ë¡œ ë³€ê²½:

```bash
# Before (ë¡œì»¬ PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/daham_voc

# After (Supabase)
DATABASE_URL=postgresql://postgres.abcdefghijk:MySecretPassword123@aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres
```

### 2. ì—°ê²° í…ŒìŠ¤íŠ¸

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì—°ê²° í™•ì¸:

```bash
cd backend
npx prisma db pull
```

ì„±ê³µ ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ë©´ ì—°ê²° ì™„ë£Œ!

---

## Prisma ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰

### 1. ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”

```bash
cd backend
npx prisma migrate deploy
```

ë˜ëŠ” ê°œë°œ í™˜ê²½ì—ì„œ:

```bash
npx prisma migrate dev
```

### 2. Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±

```bash
npx prisma generate
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸

Supabase Dashboardì—ì„œ í…Œì´ë¸” ìƒì„± í™•ì¸:

1. Dashboard â†’ **Table Editor** í´ë¦­
2. ìƒì„±ëœ í…Œì´ë¸” ëª©ë¡ í™•ì¸ (User, Site, Staff ë“±)

---

## ê°œë°œ ì„œë²„ ì‹¤í–‰

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ìµœì´ˆ 1íšŒ)

ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ:

```bash
npm install
```

### 2. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
cd backend
npm run dev
```

ì„œë²„ê°€ ì •ìƒ ì‹¤í–‰ë˜ë©´:
```
âœ… PostgreSQL connected successfully
ğŸš€ Server running on http://localhost:3000
```

### 3. ì›¹ í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

ìƒˆ í„°ë¯¸ë„ì—ì„œ:

```bash
cd web
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5173 ì ‘ì†

---

## ë¬¸ì œ í•´ê²°

### Q1: "PostgreSQL connection failed" ì—ëŸ¬

**ì›ì¸**: DATABASE_URLì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜ Supabase í”„ë¡œì íŠ¸ê°€ ë¹„í™œì„±í™”ë¨

**í•´ê²°ë°©ë²•**:
1. `.env` íŒŒì¼ì˜ `DATABASE_URL` ì¬í™•ì¸
2. Supabase Dashboardì—ì„œ í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸
3. ë¹„ë°€ë²ˆí˜¸ê°€ ì •í™•í•œì§€ í™•ì¸ (íŠ¹ìˆ˜ë¬¸ìëŠ” URL ì¸ì½”ë”© í•„ìš”)

### Q2: "Prisma Client does not exist" ì—ëŸ¬

**ì›ì¸**: Prisma í´ë¼ì´ì–¸íŠ¸ê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ

**í•´ê²°ë°©ë²•**:
```bash
cd backend
npx prisma generate
```

### Q3: í…Œì´ë¸”ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**í•´ê²°ë°©ë²•**:
```bash
cd backend
npx prisma migrate deploy
```

ë˜ëŠ”:
```bash
npx prisma db push
```

### Q4: Supabase ë¬´ë£Œ í”Œëœ ì œí•œ

**ì œí•œì‚¬í•­**:
- í”„ë¡œì íŠ¸: 2ê°œ
- ìš©ëŸ‰: 500MB
- ë™ì‹œ ì—°ê²°: 60ê°œ

**í•´ê²°ë°©ë²•**:
- ê°œë°œìš©ìœ¼ë¡œëŠ” ì¶©ë¶„í•¨
- í•„ìš”ì‹œ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ì‚­ì œ í›„ ì¬ìƒì„±

---

## ì§‘/ì‚¬ë¬´ì‹¤ í™˜ê²½ ì „í™˜

### ì§‘ì—ì„œ ì‘ì—… ì‹œì‘

1. GitHubì—ì„œ ìµœì‹  ì½”ë“œ í’€
   ```bash
   git pull origin main
   git submodule update --init --recursive
   ```

2. `.env` íŒŒì¼ í™•ì¸ (Supabase URLë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€)

3. ì„œë²„ ì‹¤í–‰
   ```bash
   cd backend && npm run dev
   cd web && npm run dev
   ```

### ì‚¬ë¬´ì‹¤ì—ì„œ ì‘ì—… ì‹œì‘

ë™ì¼í•œ ê³¼ì • ë°˜ë³µ! Supabase ë•ë¶„ì— ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤.

---

## ë°°í¬ í™˜ê²½ ì „í™˜

ë°°í¬ ì‹œì—ëŠ” ìš´ì˜ DBë¡œ ìë™ ì „í™˜ë˜ë„ë¡ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤:

```bash
# ë°°í¬ í™˜ê²½ (GCP Cloud Run ë“±)
DATABASE_URL=postgresql://[ìš´ì˜DBì—°ê²°ë¬¸ìì—´]
NODE_ENV=production
```

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Supabase ê³µì‹ ë¬¸ì„œ](https://supabase.com/docs)
- [Prisma ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](https://www.prisma.io/docs/concepts/components/prisma-migrate)
- [í”„ë¡œì íŠ¸ README](../README.md)

---

## ìš”ì•½ ì²´í¬ë¦¬ìŠ¤íŠ¸

ê°œë°œ í™˜ê²½ ì„¤ì • ì™„ë£Œ ì²´í¬:

- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [ ] ì—°ê²° ë¬¸ìì—´ ë³µì‚¬
- [ ] `backend/.env` íŒŒì¼ ìˆ˜ì •
- [ ] `npx prisma migrate deploy` ì‹¤í–‰
- [ ] `npx prisma generate` ì‹¤í–‰
- [ ] ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ í™•ì¸
- [ ] ì›¹ ì„œë²„ ì‹¤í–‰ í™•ì¸
- [ ] Supabase Table Editorì—ì„œ í…Œì´ë¸” í™•ì¸

ëª¨ë“  í•­ëª©ì´ ì²´í¬ë˜ì—ˆë‹¤ë©´ ê°œë°œ ì¤€ë¹„ ì™„ë£Œ! ğŸ‰
