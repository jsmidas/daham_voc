# Daham VOC ì‹œìŠ¤í…œ êµ¬ì¡° ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” Daham VOC ì‹œìŠ¤í…œì˜ ì „ì²´ êµ¬ì¡°ì™€ ì—­í•  ê¸°ë°˜ í™”ë©´ êµ¬ì„±ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ í”Œë«í¼ êµ¬ì„±

### 1. í”Œë«í¼ êµ¬ì¡° (3ê³„ì¸µ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Daham VOC System                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“± Mobile App (í˜„ì¥/ê³ ê°ì‚¬ìš©)                          â”‚
â”‚  â”œâ”€ React Native (Expo)                                 â”‚
â”‚  â”œâ”€ ëŒ€ìƒ: SITE_STAFF, DELIVERY_DRIVER, CLIENT          â”‚
â”‚  â””â”€ ê¸°ëŠ¥: ì¶œí‡´ê·¼, ë°°ì‹ì‚¬ì§„, VOC, ì‹ìˆ˜ì…ë ¥                â”‚
â”‚                                                          â”‚
â”‚  ğŸ–¥ï¸ Web (ê´€ë¦¬ììš©)                                      â”‚
â”‚  â”œâ”€ React + Vite + Ant Design                           â”‚
â”‚  â”œâ”€ ëŒ€ìƒ: SUPER_ADMIN, HQ_ADMIN, YEONGNAM_ADMIN,       â”‚
â”‚  â”‚         GROUP_MANAGER, SITE_MANAGER                  â”‚
â”‚  â””â”€ ê¸°ëŠ¥: ì‚¬ì—…ì¥ê´€ë¦¬, ë‹´ë‹¹ìê´€ë¦¬, í†µê³„, VOCë‹µë³€          â”‚
â”‚                                                          â”‚
â”‚  ğŸ”§ Backend API                                          â”‚
â”‚  â”œâ”€ Express.js + PostgreSQL + Redis + MongoDB          â”‚
â”‚  â”œâ”€ RESTful API (/api/v1/*)                            â”‚
â”‚  â””â”€ JWT ì¸ì¦ + RBAC ê¶Œí•œ ê´€ë¦¬                           â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ ì‚¬ìš©ì ì—­í•  ë° í”Œë«í¼

### ì—­í•  ë¶„ë¥˜ (2ê°œ ëŒ€ë¶„ë¥˜, 8ê°œ ì„¸ë¶€ ì—­í• )

#### A. ë‹¤í•¨ ë‚´ë¶€ ë‹´ë‹¹ì

**1. ê´€ë¦¬ì (ì›¹ ì‚¬ìš©)**
```
SUPER_ADMIN
â”œâ”€ ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬
â”œâ”€ ëª¨ë“  ë¶€ë¬¸ ë°ì´í„° ì ‘ê·¼
â””â”€ ë‹´ë‹¹ì ìƒì„±/ì‚­ì œ ê¶Œí•œ

HQ_ADMIN / YEONGNAM_ADMIN
â”œâ”€ ë¶€ë¬¸ë³„ ë°ì´í„° ê´€ë¦¬ (ë³¸ì‚¬/ì˜ë‚¨)
â”œâ”€ ì‚¬ì—…ì¥ ê·¸ë£¹ ìƒì„±/ì‚­ì œ
â””â”€ ë¶€ë¬¸ ë‚´ ë‹´ë‹¹ì ì¡°íšŒ

GROUP_MANAGER
â”œâ”€ ê·¸ë£¹(ë„ì‹œë½/ìš´ë°˜ê¸‰ì‹ ë“±) ê´€ë¦¬
â”œâ”€ ê·¸ë£¹ ë‚´ ì‚¬ì—…ì¥ ìƒì„±/ìˆ˜ì •
â””â”€ ë‹´ë‹¹ì ë°°ì •

SITE_MANAGER
â”œâ”€ ë³µìˆ˜ ì‚¬ì—…ì¥ ê´€ë¦¬
â”œâ”€ ì‚¬ì—…ì¥ë³„ ë°ì´í„° ì¡°íšŒ
â””â”€ ì‹ë‹¨í‘œ ì—…ë¡œë“œ
```

**2. í˜„ì¥ ë‹´ë‹¹ì (ëª¨ë°”ì¼ ì•± ì‚¬ìš©)**
```
SITE_STAFF
â”œâ”€ ë‹¨ì¼/ë³µìˆ˜ ì‚¬ì—…ì¥ ë‹´ë‹¹
â”œâ”€ ì¶œí‡´ê·¼ ì²´í¬
â”œâ”€ ë°°ì‹/ì”ë°˜ ì‚¬ì§„ ì—…ë¡œë“œ
â”œâ”€ VOC ì‘ì„±/ì¡°íšŒ
â””â”€ ì‹ë‹¨í‘œ ì¡°íšŒ

DELIVERY_DRIVER
â”œâ”€ ë³µìˆ˜ ì‚¬ì—…ì¥ ë°°ì†¡
â”œâ”€ ì¶œí‡´ê·¼ ì²´í¬
â”œâ”€ ë°°ì‹/ì”ë°˜ ì‚¬ì§„ ì—…ë¡œë“œ (ìˆœíšŒ)
â””â”€ VOC ì‘ì„±/ì¡°íšŒ
```

#### B. ê³ ê°ì‚¬ ë‹´ë‹¹ì (ëª¨ë°”ì¼ ì•± ì‚¬ìš©)

```
CLIENT
â”œâ”€ ì‹ìˆ˜ ì¸ì› ì…ë ¥ (ì¡°ì‹/ì¤‘ì‹/ì„ì‹)
â”œâ”€ ì‹ë‹¨í‘œ ì¡°íšŒ
â”œâ”€ VOC ì‘ì„±/ì¡°íšŒ
â”œâ”€ ë°°ì‹ ì‚¬ì§„ì— í‰ì 
â””â”€ ê´€ë¦¬ì ë‹µë³€ í™•ì¸
```

---

## ğŸ¨ í™”ë©´ ë° ê¸°ëŠ¥ ë§¤íŠ¸ë¦­ìŠ¤

### 1. ëª¨ë°”ì¼ ì•± í™”ë©´

| í™”ë©´/ê¸°ëŠ¥ | SITE_STAFF | DELIVERY_DRIVER | CLIENT |
|-----------|------------|-----------------|--------|
| **í™ˆ í™”ë©´** | âœ… | âœ… | âœ… |
| **ì‚¬ì—…ì¥ ì„ íƒ** | ë³µìˆ˜ì‹œ âœ… | âœ… | âŒ (ìë™) |
| **ì¶œí‡´ê·¼ ì²´í¬** | âœ… | âœ… | âŒ |
| **ë°°ì‹ ì‚¬ì§„ ì—…ë¡œë“œ** | âœ… | âœ… | âŒ |
| **ì‹ë‹¨í‘œ ì¡°íšŒ** | âœ… | âœ… | âœ… |
| **VOC ì‘ì„±** | âœ… | âœ… | âœ… |
| **VOC ì¡°íšŒ** | âœ… ë³¸ì¸+ë‹´ë‹¹ | âœ… ë³¸ì¸+ë‹´ë‹¹ | âœ… ë³¸ì¸ë§Œ |
| **ì‹ìˆ˜ ì¸ì› ì…ë ¥** | âŒ | âŒ | âœ… (ë¯¸êµ¬í˜„) |
| **ë§ˆì´í˜ì´ì§€** | âœ… | âœ… | âœ… |

### 2. ì›¹ ê´€ë¦¬ì í™”ë©´

| í˜ì´ì§€/ê¸°ëŠ¥ | SUPER_ADMIN | HQ_ADMIN | YEONGNAM_ADMIN | GROUP_MANAGER | SITE_MANAGER |
|-------------|-------------|----------|----------------|---------------|--------------|
| **ëŒ€ì‹œë³´ë“œ** | âœ… ì „ì²´ | âœ… ë³¸ì‚¬ | âœ… ì˜ë‚¨ | âœ… ê·¸ë£¹ | âœ… ë‹´ë‹¹ |
| **ì‚¬ì—…ì¥ ê´€ë¦¬** | âœ… CRUD | âœ… CRUD | âœ… CRUD | âœ… CRUD | âœ… ì¡°íšŒ/ìˆ˜ì • |
| **ì‚¬ì—…ì¥ ê·¸ë£¹** | âœ… CRUD | âœ… CRUD | âœ… CRUD | âœ… ì¡°íšŒ/ìˆ˜ì • | âŒ |
| **ë‹´ë‹¹ì ê´€ë¦¬** | âœ… CRUD | âœ… ì¡°íšŒ | âœ… ì¡°íšŒ | âœ… ì¡°íšŒ | âœ… ì¡°íšŒ |
| **ì‹ë‹¨ ê´€ë¦¬** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **ë°°ì‹ ì‚¬ì§„** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **VOC ê´€ë¦¬** | âœ… ë‹µë³€ | âœ… ë‹µë³€ | âœ… ë‹µë³€ | âœ… ë‹µë³€ | âœ… ë‹µë³€ |
| **ê·¼íƒœ ê´€ë¦¬** | âœ… ì „ì²´ | âœ… ë³¸ì‚¬ | âœ… ì˜ë‚¨ | âœ… ê·¸ë£¹ | âœ… ë‹´ë‹¹ |
| **í†µê³„ ì¡°íšŒ** | âœ… ì „ì²´ | âœ… ë³¸ì‚¬ | âœ… ì˜ë‚¨ | âœ… ê·¸ë£¹ | âœ… ë‹´ë‹¹ |
| **ì‹ìˆ˜ í˜„í™©** | âœ… (ë¯¸êµ¬í˜„) | âœ… (ë¯¸êµ¬í˜„) | âœ… (ë¯¸êµ¬í˜„) | âœ… (ë¯¸êµ¬í˜„) | âœ… (ë¯¸êµ¬í˜„) |

---

## ğŸ” ê¶Œí•œ ê¸°ë°˜ ë°ì´í„° ì ‘ê·¼

### ì‚¬ì—…ì¥ ì„ íƒ ë¡œì§

```typescript
// ì‚¬ì—…ì¥ ì„ íƒ íŒ¨í„´
const currentSiteId = user?.siteId || selectedSiteId;

/**
 * - SITE_STAFF (ë‹¨ì¼ ì‚¬ì—…ì¥): user.siteId ê³ ì •
 * - SITE_MANAGER (ë³µìˆ˜ ì‚¬ì—…ì¥): selectedSiteId ì„ íƒ
 * - DELIVERY_DRIVER (ë³µìˆ˜ ì‚¬ì—…ì¥): selectedSiteId ì„ íƒ
 * - CLIENT: user.siteId ê³ ì •
 */
```

### ë°ì´í„° í•„í„°ë§ ì˜ˆì‹œ

```typescript
// ì‚¬ì—…ì¥ ëª©ë¡ ì¡°íšŒ ì‹œ
async function getSites(userId: string) {
  const user = await getUserWithRole(userId);

  switch (user.role) {
    case 'SUPER_ADMIN':
      // ëª¨ë“  ì‚¬ì—…ì¥
      return allSites;

    case 'HQ_ADMIN':
      // ë³¸ì‚¬ ì‚¬ì—…ì¥ë§Œ
      return sites.filter(s => s.division === 'HQ');

    case 'YEONGNAM_ADMIN':
      // ì˜ë‚¨ ì‚¬ì—…ì¥ë§Œ
      return sites.filter(s => s.division === 'YEONGNAM');

    case 'SITE_MANAGER':
    case 'SITE_STAFF':
    case 'DELIVERY_DRIVER':
      // í• ë‹¹ëœ ì‚¬ì—…ì¥ë§Œ
      return user.staff.staffSites.map(ss => ss.site);

    case 'CLIENT':
      // ìì‹ ì˜ ì‚¬ì—…ì¥ë§Œ
      return [sites.find(s => s.id === user.siteId)];
  }
}
```

---

## ğŸ“± ëª¨ë°”ì¼ ì•± ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°

### Bottom Tab Navigator

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [í™ˆ]  [ì¶œí‡´ê·¼]  [ë°°ì‹ì‚¬ì§„]  [ì‹ë‹¨í‘œ]  [VOC]  [ë§ˆì´]   â”‚ â† SITE_STAFF
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [í™ˆ]  [ì¶œí‡´ê·¼]  [ë°°ì‹ì‚¬ì§„]  [ì‹ë‹¨í‘œ]  [VOC]  [ë§ˆì´]   â”‚ â† DELIVERY_DRIVER
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [í™ˆ]  [ì‹ìˆ˜ì…ë ¥]  [ì‹ë‹¨í‘œ]  [VOC]  [ë§ˆì´]             â”‚ â† CLIENT
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì—­í• ë³„ íƒ­ í‘œì‹œ

```typescript
// AppNavigator.tsx
function MainTabs() {
  const { user } = useAuthStore();
  const shouldShowAttendance = user?.role !== 'CLIENT';
  const shouldShowMealCount = user?.role === 'CLIENT';

  return (
    <Tab.Navigator>
      <Tab.Screen name="HomeTab" component={HomeScreen} />

      {/* ì¶œí‡´ê·¼ - CLIENT ì œì™¸ */}
      {shouldShowAttendance && (
        <Tab.Screen name="AttendanceTab" component={AttendanceScreen} />
      )}

      {/* ë°°ì‹ ì‚¬ì§„ - CLIENT ì œì™¸ */}
      {shouldShowAttendance && (
        <Tab.Screen name="MealPhotoTab" component={MealPhotoScreen} />
      )}

      {/* ì‹ìˆ˜ ì…ë ¥ - CLIENTë§Œ */}
      {shouldShowMealCount && (
        <Tab.Screen name="MealCountTab" component={MealCountScreen} />
      )}

      {/* ê³µí†µ */}
      <Tab.Screen name="MenuTab" component={MenuScreen} />
      <Tab.Screen name="VOCTab" component={VOCScreen} />
      <Tab.Screen name="MyTab" component={MyScreen} />
    </Tab.Navigator>
  );
}
```

---

## ğŸ”„ API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°

### Backend API ë§¤í•‘

```
/api/v1
â”œâ”€ /auth              # ì¸ì¦
â”‚  â”œâ”€ POST /login
â”‚  â”œâ”€ POST /register
â”‚  â”œâ”€ GET /me
â”‚  â””â”€ PUT /password
â”‚
â”œâ”€ /sites             # ì‚¬ì—…ì¥ ê´€ë¦¬
â”‚  â”œâ”€ GET /           # ëª©ë¡ (ê¶Œí•œë³„ í•„í„°ë§)
â”‚  â”œâ”€ POST /          # ìƒì„± (ADMINë§Œ)
â”‚  â”œâ”€ GET /:id        # ìƒì„¸
â”‚  â”œâ”€ PUT /:id        # ìˆ˜ì •
â”‚  â””â”€ DELETE /:id     # ì‚­ì œ
â”‚
â”œâ”€ /site-groups       # ì‚¬ì—…ì¥ ê·¸ë£¹
â”‚  â”œâ”€ GET /
â”‚  â”œâ”€ POST /
â”‚  â”œâ”€ PUT /:id
â”‚  â””â”€ DELETE /:id
â”‚
â”œâ”€ /menus             # ì‹ë‹¨ ê´€ë¦¬
â”‚  â”œâ”€ GET /           # ëª©ë¡
â”‚  â”œâ”€ POST /          # ì—…ë¡œë“œ
â”‚  â””â”€ DELETE /:id
â”‚
â”œâ”€ /weekly-menu-templates  # ì£¼ê°„ ì‹ë‹¨í‘œ
â”‚  â”œâ”€ GET /           # ì£¼ì°¨ë³„ ì¡°íšŒ
â”‚  â”œâ”€ POST /          # ì—…ë¡œë“œ
â”‚  â””â”€ DELETE /:id
â”‚
â”œâ”€ /meal-photos       # ë°°ì‹ ì‚¬ì§„
â”‚  â”œâ”€ GET /daily      # ì¼ì¼ ì¡°íšŒ
â”‚  â”œâ”€ GET /weekly     # ì£¼ê°„ ì¡°íšŒ
â”‚  â”œâ”€ POST /bulk      # ì¼ê´„ ì—…ë¡œë“œ
â”‚  â””â”€ DELETE /:id
â”‚
â”œâ”€ /feedbacks         # VOC
â”‚  â”œâ”€ GET /           # ëª©ë¡ (ê¶Œí•œë³„)
â”‚  â”œâ”€ POST /          # ì‘ì„±
â”‚  â”œâ”€ PUT /:id/reply  # ë‹µë³€ (ADMIN)
â”‚  â””â”€ PUT /:id/status # ìƒíƒœ ë³€ê²½
â”‚
â”œâ”€ /attendances       # ê·¼íƒœ
â”‚  â”œâ”€ POST /check-in
â”‚  â”œâ”€ POST /:id/check-out
â”‚  â”œâ”€ GET /today
â”‚  â”œâ”€ GET /table      # í‘œ í˜•ì‹
â”‚  â””â”€ GET /statistics
â”‚
â”œâ”€ /staff             # ë‹´ë‹¹ì ê´€ë¦¬
â”‚  â”œâ”€ GET /
â”‚  â”œâ”€ POST /          # SUPER_ADMINë§Œ
â”‚  â”œâ”€ PUT /:id
â”‚  â””â”€ DELETE /:id     # SUPER_ADMINë§Œ
â”‚
â”œâ”€ /meal-counts       # ì‹ìˆ˜ ê´€ë¦¬ (ë¯¸êµ¬í˜„)
â”‚  â”œâ”€ GET /           # ì¡°íšŒ
â”‚  â”œâ”€ POST /          # ì…ë ¥ (CLIENT)
â”‚  â”œâ”€ PUT /:id        # ìˆ˜ì •
â”‚  â””â”€ GET /settings   # ë§ˆê° ì„¤ì •
â”‚
â””â”€ /dashboard         # ëŒ€ì‹œë³´ë“œ
   â”œâ”€ GET /summary    # ìš”ì•½ í†µê³„
   â””â”€ GET /recent     # ìµœê·¼ í™œë™
```

---

## ğŸ¯ ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### 1. ì‚¬ì—…ì¥ ì„ íƒ ë™ê¸°í™”

**êµ¬í˜„ ìœ„ì¹˜**: `mobile/src/store/authStore.ts`

```typescript
interface AuthState {
  user: User | null;
  selectedSiteId: string | null;      // ê¸€ë¡œë²Œ ì„ íƒëœ ì‚¬ì—…ì¥
  availableSites: Site[];             // ì„ íƒ ê°€ëŠ¥í•œ ì‚¬ì—…ì¥ ëª©ë¡
  setSelectedSite: (siteId: string) => Promise<void>;
}

// AsyncStorageì— ì˜ì†í™”
persist(
  (set) => ({ ... }),
  {
    name: 'auth-storage',
    storage: createJSONStorage(() => AsyncStorage),
  }
)
```

**ì‚¬ìš© íŒ¨í„´**:
- `HomeScreen`: `<SiteSelector />` í‘œì‹œ (ë³µìˆ˜ ì‚¬ì—…ì¥ì¸ ê²½ìš°)
- ë‹¤ë¥¸ í™”ë©´: `const currentSiteId = user?.siteId || selectedSiteId`

### 2. GPS ê²€ì¦ (Geofencing)

**ì‚¬ì—…ì¥ ë°˜ê²½ ì²´í¬**: 30m

```typescript
// utils/geofencing.util.ts
function checkGeofence(
  userLat: number,
  userLng: number,
  siteLat: number,
  siteLng: number,
  radius: number = 30
): boolean {
  const distance = calculateDistance(userLat, userLng, siteLat, siteLng);
  return distance <= radius;
}
```

**ì ìš© ê¸°ëŠ¥**:
- âœ… ì¶œí‡´ê·¼ ì²´í¬
- âœ… ë°°ì‹ ì‚¬ì§„ ì—…ë¡œë“œ

### 3. ì‹ìˆ˜ ì…ë ¥ ë§ˆê° ì²´í¬ (ë¯¸êµ¬í˜„)

```typescript
// ì¡°ë¦¬ ì‹œì‘ 24ì‹œê°„ ì „ ë§ˆê°
function isDeadlinePassed(
  mealDate: Date,
  mealType: MealType,
  setting: MealCountSetting
): boolean {
  const cookingStartTime = getCookingStartTime(mealType, setting);
  const deadlineTime = subHours(cookingStartTime, setting.deadlineHoursBefore);
  return new Date() > deadlineTime;
}
```

---

## ğŸ“Š ë°ì´í„° íë¦„ ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ë°°ì‹ ì‚¬ì§„ ì—…ë¡œë“œ

```
[ëª¨ë°”ì¼ ì•± - SITE_STAFF]
1. ì‚¬ì§„ ì´¬ì˜ (expo-image-picker)
2. GPS ì¢Œí‘œ íšë“ (expo-location)
3. ì‚¬ì—…ì¥ ë°˜ê²½ ì²´í¬ (30m)
4. ì´ë¯¸ì§€ ì••ì¶• (ì„ íƒì )
5. POST /api/v1/meal-photos/bulk
   - siteId: currentSiteId
   - mealType: 'LUNCH'
   - photoType: 'SERVING'
   - latitude, longitude
   - imageUrl

[Backend API]
6. JWT í† í° ê²€ì¦ (authMiddleware)
7. ê¶Œí•œ í™•ì¸ (SITE_STAFF, DELIVERY_DRIVERë§Œ)
8. GPS ê²€ì¦ (geofencing.util)
9. ì´ë¯¸ì§€ ì—…ë¡œë“œ (GCP Storage)
10. DB ì €ì¥ (MealPhoto)
11. ì‘ë‹µ ë°˜í™˜

[ì›¹ ê´€ë¦¬ì]
12. GET /api/v1/meal-photos/daily
13. ì‚¬ì§„ ëª©ë¡ í‘œì‹œ
14. ê´€ë¦¬ì í”¼ë“œë°± ì‘ì„± ê°€ëŠ¥
```

### ì˜ˆì‹œ 2: VOC ì‘ì„± ë° ë‹µë³€

```
[ëª¨ë°”ì¼ ì•± - CLIENT]
1. VOC ì‘ì„± í™”ë©´
2. ì‚¬ì—…ì¥ ìë™ ì„ íƒ (user.siteId)
3. ë‚´ìš©, ë³„ì , ë¼ë‹ˆ, ì‚¬ì§„ ì²¨ë¶€
4. POST /api/v1/feedbacks
   - siteId: user.siteId
   - authorType: 'CLIENT'
   - rating: 5
   - mealType: 'LUNCH'
   - images: [...]

[Backend API]
5. ì €ì¥ (CustomerFeedback + FeedbackImage)
6. ìƒíƒœ: PENDING

[ì›¹ ê´€ë¦¬ì - SITE_MANAGER]
7. GET /api/v1/feedbacks (ë‹´ë‹¹ ì‚¬ì—…ì¥ë§Œ)
8. VOC ëª©ë¡ í™•ì¸
9. PUT /api/v1/feedbacks/:id/reply
   - adminReply: "ë‹µë³€ ë‚´ìš©"
10. ìƒíƒœ: RESOLVED

[ëª¨ë°”ì¼ ì•± - CLIENT]
11. VOC ëª©ë¡ ì¡°íšŒ
12. ê´€ë¦¬ì ë‹µë³€ í™•ì¸
```

---

## ğŸš€ ë¯¸êµ¬í˜„ ê¸°ëŠ¥ (í˜„ì¬ ìƒíƒœ)

### Phase 1: ì‹ìˆ˜ ê´€ë¦¬ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)

**DB**: âœ… ì™„ë£Œ
- MealCountSetting ëª¨ë¸
- MealCount ëª¨ë¸

**Backend API**: âŒ ë¯¸êµ¬í˜„
```
í•„ìš”í•œ ì—”ë“œí¬ì¸íŠ¸:
- POST /api/v1/meal-counts        # ì‹ìˆ˜ ì…ë ¥ (CLIENT)
- GET /api/v1/meal-counts          # ì¡°íšŒ (ê¶Œí•œë³„)
- PUT /api/v1/meal-counts/:id      # ìˆ˜ì •
- GET /api/v1/meal-counts/settings # ë§ˆê° ì„¤ì • ì¡°íšŒ
- PUT /api/v1/meal-counts/settings # ë§ˆê° ì„¤ì • ìˆ˜ì • (ADMIN)
```

**ëª¨ë°”ì¼ ì•±**: âŒ ë¯¸êµ¬í˜„
```
í•„ìš”í•œ í™”ë©´:
- MealCountScreen.tsx              # CLIENTìš© ì‹ìˆ˜ ì…ë ¥ í™”ë©´
  â”œâ”€ ë‚ ì§œ ì„ íƒ (ìº˜ë¦°ë”)
  â”œâ”€ ë¼ë‹ˆ ì„ íƒ (ì¡°ì‹/ì¤‘ì‹/ì„ì‹)
  â”œâ”€ ì¸ì›ìˆ˜ ì…ë ¥
  â”œâ”€ ë§ˆê° ì‹œê°„ í‘œì‹œ
  â””â”€ ì…ë ¥ ë‚´ì—­ ì¡°íšŒ
```

**ì›¹ ê´€ë¦¬ì**: âŒ ë¯¸êµ¬í˜„
```
í•„ìš”í•œ í˜ì´ì§€:
- MealCountManagementPage.tsx     # ì‹ìˆ˜ í˜„í™© ì¡°íšŒ
  â”œâ”€ ì‚¬ì—…ì¥ë³„ ì‹ìˆ˜ í˜„í™©
  â”œâ”€ ë¯¸ì…ë ¥ ì•Œë¦¼
  â”œâ”€ ì‹ìˆ˜ ìˆ˜ì • (ê¸´ê¸‰)
  â””â”€ í†µê³„ ê·¸ë˜í”„
```

### Phase 2: ì•Œë¦¼ ì‹œìŠ¤í…œ

- âŒ VOC ì•Œë¦¼ (FCM í‘¸ì‹œ)
- âŒ ì‹ìˆ˜ ë¯¸ì…ë ¥ ì•Œë¦¼
- âŒ ê·¼íƒœ ì´ìƒ ì•Œë¦¼

### Phase 3: ë°°í¬ ì¸í”„ë¼

- âŒ Docker ì»¨í…Œì´ë„ˆí™”
- âŒ CI/CD íŒŒì´í”„ë¼ì¸
- âŒ GCP Cloud Run ë°°í¬
- âŒ ë„ë©”ì¸ ì—°ê²° ë° SSL
- âŒ ëª¨ë‹ˆí„°ë§ (Sentry, Logging)

---

## ğŸ“ ì°¸ê³  ë¬¸ì„œ

- **ê¶Œí•œ_ì²´ê³„_ê°€ì´ë“œ.md** - ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ ìƒì„¸
- **êµ¬í˜„_ê°€ì´ë“œ_Phase1-6.md** - êµ¬í˜„ ê°€ì´ë“œ
- **ê°œë°œ_ê°€ì´ë“œ.md** - ê¸°ìˆ  ìŠ¤íƒ, API ëª…ì„¸
- **ìš´ì˜_ê°€ì´ë“œ.md** - ìš´ì˜ ë§¤ë‰´ì–¼

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-13
**ì‘ì„±ì**: Claude (Anthropic)
